<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script src="http://cdn.jsdelivr.net/jquery.validation/1.13.1/jquery.validate.min.js" type="text/javascript"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/mvc/5.2/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
    <script src="http://malsup.github.com/jquery.form.js"></script> 
    <script src="../Scripts/ChallengeFund.js"></script>
    <script src="../Scripts/ChallengeFundForm.js"></script>
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="../Content/main.css" />
    <title></title>
</head>
<body>
    <div class="container">
        <br />
        <span class="heading"> Basic Information </span>
        <span class="navigator">
            > <a href="Project.html">Project Details</a>
            > <a href="Budgeting.html">Project Plan</a>
            > <a href="Funding.html">Funding Details</a>
            > <a href="Delivering.html">Delivering Benefits</a>
        </span>
        <br />

        <div id="ResultSection" class="result"></div>

        <form action="/ChallengeFund/Basic" id="ChallengeFundForm" method="POST">

            <div class="row form-group">

                <div class="col-md-6 form-group">
                    <label for="OrganisationName">Organisation Name</label>
                    <input class="form-control" data-val="true" data-val-required="Organisation Name is required." id="OrganisationName" name="OrganisationName" type="text" value="" />
                    <span class="field-validation-valid text-danger" data-valmsg-for="OrganisationName" data-valmsg-replace="true"></span>
                </div>
                <div class="col-md-6 form-group">
                    <label for="LeadContact">Lead Contact</label>
                    <input class="form-control" data-val="true" data-val-required="Lead Contact field is required." id="LeadContact" name="LeadContact" type="text" value="" />
                    <span class="field-validation-valid text-danger" data-valmsg-for="LeadContact" data-valmsg-replace="true"></span>
                </div>

            </div>

            <div class="form-group">
                <div class="form-group">
                    <label for="Email">Email</label>
                    <input class="form-control" data-val="true" data-val-required="Email is required." id="Email" name="Email" type="text" value="" />
                    <span class="field-validation-valid text-danger" data-valmsg-for="Email" data-valmsg-replace="true"></span>
                </div>
            </div>


            <div class="form-group">
                <label for="OrganisationAddress">Organisation Address</label>

                <textarea class="form-control" cols="25" data-val="true" data-val-required="Organisation Address is required." id="OrganisationAddress" name="OrganisationAddress" rows="5"> </textarea>
                <span class="field-validation-valid text-danger" data-valmsg-for="OrganisationAddress" data-valmsg-replace="true"></span>

            </div>

            <div class="form-group">
                <label for="Sector">What sector do you operate in?</label>
                <select class="form-control " id="Sector" name="Sector">
                    <option value="">Please select</option>
                </select>
                <span class="field-validation-valid text-danger" data-valmsg-for="Sector" data-valmsg-replace="true"></span>
            </div>

            <div class="row form-group" id="RegisteredWithOscrRow" style="margin-top:30px">
                <!--<div class="col-md-8 form-group">
                    <label style="margin-top:10px">Are you registered with OSCR?</label> &nbsp;
                    <input name="cbRegisteredWithOscr" id="cbRegisteredWithOscr" type="checkbox" onchange="cbChanged(this, 'OscrRegNo');" value="">
                    <input type="hidden" id="RegisteredWithOscr" name="RegisteredWithOscr" value="false" />
                </div>-->
                <div class="col-md-6 form-group" id="OscrRegNoLayer">
                    <label id="OscrRegNoLabel">OSCR Registration number:</label>
                    <input class="form-control" id="OscrRegNo" name="OscrRegNo" type="text" value="" />
                </div>
                <div class="col-md-6 form-group" id="CompaniesHouseRegNoLayer">
                    <label id="CompaniesHouseRegNoLabel">Companies House Registration number:</label>
                    <input class="form-control" id="CompaniesHouseRegNo" name="CompaniesHouseRegNo" type="text" value="" />
                </div>
            </div>


            <!--<div class="row form-group" id="RegisteredWithCompaniesHouseRow">
                <div class="col-md-8 form-group">
                    <label style="margin-top:10px">Are you registered with Companies House?</label> &nbsp;
                    <input name="cbRegisteredWithCompaniesHouse" id="cbRegisteredWithCompaniesHouse" type="checkbox" onchange="cbChanged(this, 'CompaniesHouseRegNo');" value="">
                    <input type="hidden" id="RegisteredWithCompaniesHouse" name="RegisteredWithCompaniesHouse" value="false" />
                    <label style="margin-top:10px; margin-left:50px;" id="CompaniesHouseRegNoLabel">Companies House Registration number:</label>
                </div>
                <div class="col-md-4 form-group" id="CompaniesHouseRegNoLayer" style="display:none;">
                    <input class="form-control" data-val="true" data-val-required="Companies House Registration Number field is required." id="CompaniesHouseRegNo" name="CompaniesHouseRegNo" type="text" value="" />
                    <span class="field-validation-valid text-danger" data-valmsg-for="CompaniesHouseRegNo" data-valmsg-replace="true"></span>
                </div>
            </div>-->


            <div class="form-group">
                <label for="OrganisationAge">How old is your organisation?</label>
                <select class="form-control " id="OrganisationAge" name="OrganisationAge">
                    <option value="">Please select</option>
                </select>
                <span class="field-validation-valid text-danger" data-valmsg-for="OrganisationAge" data-valmsg-replace="true"></span>
            </div>


            <div class="row form-group" id="ExternallyFundedRow" style="margin-top:30px">
                <div class="col-md-8 form-group">
                    <label style="margin-top:10px">Have you been externally funded in the last 3 years?</label> &nbsp;
                    <input name="cbExternallyFunded" id="cbExternallyFunded" type="checkbox" onchange="cbChanged(this, 'ExternalFunder');" value="">
                    <input type="hidden" id="ExternallyFunded" name="ExternallyFunded" value="false" />
                    <label style="margin-top:10px; margin-left:200px;" id="ExternalFunderLabel">Funded by:</label>
                </div>
                <div class="col-md-4 form-group" id="ExternalFunderLayer" style="display:none;">
                    <input class="form-control" data-val="true" data-val-required="External Funder field is required." id="ExternalFunder" name="ExternalFunder" type="text" value="" />
                    <span class="field-validation-valid text-danger" data-valmsg-for="External Funder" data-valmsg-replace="true"></span>
                </div>
            </div>

            <div class="form-group" id="logoFileBox">
                <b>Please include a logo of your organisation:</b><br />
                <input type="file" class="btn btn-lg btn-info" id="logoFile" onchange="logoFileChanged()" name="logoFile" accept="image/*">
                <span class="text-danger field-validation-error" id="logoFileValidationError" style="display:none;">
                    <span id="LogoFile-error" class="">
                        Please include an image file (max 4 MB)
                    </span>
                </span>
            </div>


            <button type="submit" class="btn btn-primary btn-lg" id="btnNext">Save & Next</button>
            <span id="ProcessingPanel" class="alert" style="display: none;">
                Processing, please wait . . .
                <img src="http://www.geniosity.co.za/genwp/wp-content/uploads/2007/01/ajax-loader-animated-2.gif" alt="ajax-loader">
            </span> <span id="result" class="result"> </span>

        </form>

    </div>
    <script language="JavaScript">

        $(document).ready(function () {

            loadMetaData();

            //$("#OscrRegNoLabel").hide();
            //$("#CompaniesHouseRegNoLabel").hide();
            $("#ExternalFunderLabel").hide();

        });

        function loadMetaData() {
            $.ajax({
                type: 'GET',
                dataType: "json",
                url: '/ChallengeFund/GetMetaData',
                success: function (data) {
                    //console.log(data);
                    $.each(data, function (index, element) {
                        //console.log(index, element);
                        if (index === "Sectors") {
                            appendOptionValuesToDropDown("Sector", element);
                        } else if (index === "OrganisationAge") {
                            appendOptionValuesToDropDown("OrganisationAge", element);
                        }
                    });
                }
            });
        }

        function loadData(data) {
            $("#OrganisationName").val(data.OrganisationName);
        }

        function OnSuccessCall() {
            window.location.href = 'Project.html';
        }

        function logoFileChanged() {
            $("#logoFileValidationError").hide();
        }

    </script>
</body>
</html>
