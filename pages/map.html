---
layout: page
title: Project map
excerpt: Explore our projects by where in Scotland they are based.
permalink: /projects/map/
---

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 

<div id="map" style="height: 500px"></div>

<script type="text/javascript">

  var infowindow = new google.maps.InfoWindow();
  var latlng = new google.maps.LatLng(56.490671, -4.202646);
  var mapOptions = {
    zoom: 7,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var bounds = new google.maps.LatLngBounds();

  var map = new google.maps.Map(document.getElementById("map"), mapOptions);   
   
  $.getJSON("/json/json-projects.html", function(data){
    $.each(data.projects, function(i, field){
    
      if (field.lat && field.lng != "") {
    
    
         var contentString = '<a href="'+field.url+'">'+field.lead+'</a><br>'+field.title;
       
         var marker = new google.maps.Marker({
           position: new google.maps.LatLng(field.lat,field.lng),
           map: map,
           zIndex: Math.round(latlng.lat()*-100000)<<5
         });

        google.maps.event.addListener(marker, 'click', function() {
           infowindow.setContent(contentString); 
           infowindow.open(map,marker);
         });

         bounds.extend(marker.position);
       
      }
    
    });
  });
  
  map.fitBounds(bounds);
  
</script>


